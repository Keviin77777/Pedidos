exports.id=670,exports.ids=[42,670],exports.modules={17357:(e,s,t)=>{"use strict";t.d(s,{A:()=>c});var a=t(60687),r=t(43210),i=t(19210),n=t(25177),l=t(4780);let o=r.forwardRef(({className:e,value:s,...t},r)=>(0,a.jsx)(n.bL,{ref:r,className:(0,l.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...t,children:(0,a.jsx)(n.C1,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));function c(){let{isInitialLoading:e}=(0,r.useContext)(i.z),[s,t]=(0,r.useState)(0),[n,l]=(0,r.useState)(e);return n?(0,a.jsx)("div",{className:`fixed inset-0 z-[200] flex flex-col items-center justify-center bg-background transition-opacity duration-500 ${e?"opacity-100":"opacity-0"}`,children:(0,a.jsxs)("div",{className:"w-full max-w-md p-8 text-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-primary mb-4",children:"Aguarde para conex\xe3o com o servidor"}),(0,a.jsx)(o,{value:s,className:"w-full"})]})}):null}o.displayName=n.bL.displayName},19210:(e,s,t)=>{"use strict";t.d(s,{z:()=>o,L:()=>u});var a=t(60687),r=t(43210),i=t(70709),n=t(6475);let l=(0,n.createServerReference)("00aef7fe477b36c101029c0e540702e6f4225a9e00",n.callServer,void 0,n.findSourceMapURL,"getAllM3UItems"),o=(0,r.createContext)({m3uItems:[],allM3uItems:[],isInitialLoading:!0}),c=null,d=null,m=!1,u=({children:e})=>{let[s,t]=(0,r.useState)(c||[]),[n,u]=(0,r.useState)(d||[]),[x,h]=(0,r.useState)(!m);return(0,r.useEffect)(()=>{(async()=>{if(!m)try{let[e,s]=await Promise.all([(0,i.Q)(),l()]);c=e,d=s,t(e),u(s)}catch(e){console.error("Failed to load M3U items for context:",e),c=[],d=[],t([]),u([])}finally{h(!1),m=!0}})()},[]),(0,a.jsx)(o.Provider,{value:{m3uItems:s,allM3uItems:n,isInitialLoading:x},children:e})}},34956:(e,s,t)=>{Promise.resolve().then(t.bind(t,78291))},35950:(e,s,t)=>{"use strict";t.d(s,{w:()=>l});var a=t(60687),r=t(43210),i=t(62369),n=t(4780);let l=r.forwardRef(({className:e,orientation:s="horizontal",decorative:t=!0,...r},l)=>(0,a.jsx)(i.b,{ref:l,decorative:t,orientation:s,className:(0,n.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",e),...r}));l.displayName=i.b.displayName},41324:(e,s,t)=>{"use strict";t.r(s),t.d(s,{"007e87f2e2dbbb8d99d374e9797296581838690a1e":()=>m,"00aef7fe477b36c101029c0e540702e6f4225a9e00":()=>u});var a=t(91199);t(42087);var r=t(33331);let i=process.env.NEXT_PUBLIC_TMDB_API_KEY,n="https://image.tmdb.org/t/p/w500";async function l(e,s){if(!i)return null;try{let t=e.replace(/\s*\([^)]*\)/g,"").trim();for(let e of[t,t.replace(/^\d+\s*/,""),t.replace(/\s*\([^)]*\)/g,"").trim(),t.split(" ").slice(0,3).join(" ")]){if(!e.trim())continue;let t=await fetch(`https://api.themoviedb.org/3/search/${s}?api_key=${i}&query=${encodeURIComponent(e)}&language=pt-BR`,{cache:"no-store"});if(!t.ok)continue;let a=await t.json();if(a.results&&a.results.length>0){let e=a.results[0];return{poster_path:e.poster_path,overview:e.overview}}}return null}catch(e){return null}}let o=process.env.XUI_API_URL||"https://dnscine.top",c=process.env.XUI_USERNAME||"Vodsm3u789DS",d=process.env.XUI_PASSWORD||"w5NwV8dPXE";async function m(){if(!o||!c||!d)return[];try{let e=`${o}/player_api.php?username=${c}&password=${d}`,s={vod:`${e}&action=get_vod_streams`,series:`${e}&action=get_series`,vodCategories:`${e}&action=get_vod_categories`,seriesCategories:`${e}&action=get_series_categories`},[t,a,r,i]=await Promise.all([fetch(s.vod,{cache:"no-store"}),fetch(s.series,{cache:"no-store"}),fetch(s.vodCategories,{cache:"no-store"}),fetch(s.seriesCategories,{cache:"no-store"})]),m=async(e,s)=>{if(!e.ok)return[];try{let s=await e.json();if(!Array.isArray(s))return[];return s}catch(e){return[]}},u=await m(t,"VOD streams"),x=await m(a,"Series"),h=await m(r,"VOD categories"),f=await m(i,"Series categories"),p=u.slice(-30),g=x.slice(-30),j=new Map;h.forEach(e=>j.set(e.category_id,e.category_name));let v=new Map;f.forEach(e=>v.set(e.category_id,e.category_name));let N=await Promise.all(p.map(async e=>{let s=e.category_id?j.get(e.category_id):"Filme",t=await l(e.name,"movie");return{name:e.name,logo:t?.poster_path?`${n}${t.poster_path}`:e.stream_icon||null,category:s||"Filme",url:"",synopsis:t?.overview||"",type:"movie",vod_id:e.stream_id||e.vod_id||e.num||e.id}})),y=await Promise.all(g.map(async e=>{let s=e.category_id?v.get(e.category_id):"S\xe9rie",t=e.cover||e.stream_icon||null,a="";if(!e.cover){let s=await l(e.name,"tv");t=s?.poster_path?`${n}${s.poster_path}`:e.stream_icon||null,a=s?.overview||""}return{name:e.name,logo:t,category:s||"S\xe9rie",url:"",synopsis:a,type:"series",series_id:e.stream_id||e.series_id||e.num||e.id}}));return[...N,...y]}catch(e){return[]}}async function u(){if(!o||!c||!d)return[];try{let e=`${o}/player_api.php?username=${c}&password=${d}`,s={vod:`${e}&action=get_vod_streams`,series:`${e}&action=get_series`,vodCategories:`${e}&action=get_vod_categories`,seriesCategories:`${e}&action=get_series_categories`},[t,a,r,i]=await Promise.all([fetch(s.vod,{cache:"no-store"}),fetch(s.series,{cache:"no-store"}),fetch(s.vodCategories,{cache:"no-store"}),fetch(s.seriesCategories,{cache:"no-store"})]),m=async(e,s)=>{if(!e.ok)return[];try{let s=await e.json();if(!Array.isArray(s))return[];return s}catch(e){return[]}},u=await m(t,"VOD streams"),x=await m(a,"Series"),h=await m(r,"VOD categories"),f=await m(i,"Series categories"),p=new Map;h.forEach(e=>p.set(e.category_id,e.category_name));let g=new Map;f.forEach(e=>g.set(e.category_id,e.category_name));let j=await Promise.all(u.map(async e=>{let s=e.category_id?p.get(e.category_id):"Filme",t=await l(e.name,"movie");return{name:e.name,logo:t?.poster_path?`${n}${t.poster_path}`:e.stream_icon||null,category:s||"Filme",url:"",synopsis:t?.overview||"",type:"movie",vod_id:e.stream_id||e.vod_id||e.num||e.id}})),v=await Promise.all(x.map(async e=>{let s=e.category_id?g.get(e.category_id):"S\xe9rie",t=e.cover||e.stream_icon||null,a="";if(!e.cover){let s=await l(e.name,"tv");t=s?.poster_path?`${n}${s.poster_path}`:e.stream_icon||null,a=s?.overview||""}return{name:e.name,logo:t,category:s||"S\xe9rie",url:"",synopsis:a,type:"series",series_id:e.stream_id||e.series_id||e.num||e.id}}));return[...j,...v]}catch(e){return[]}}(0,r.D)([m,u]),(0,a.A)(m,"007e87f2e2dbbb8d99d374e9797296581838690a1e",null),(0,a.A)(u,"00aef7fe477b36c101029c0e540702e6f4225a9e00",null)},46952:(e,s,t)=>{"use strict";t.d(s,{E:()=>c,p:()=>o});var a=t(60687),r=t(43210),i=t(77042),n=t(7605);let l=(0,r.createContext)(void 0);function o({children:e}){let[s,t]=(0,r.useState)([]),[o,c]=(0,r.useState)([]),[d,m]=(0,r.useState)(!0),{userInfo:u}=(0,i.useXtream)(),x=s.filter(e=>!e.read).length,h=async()=>{if(u?.username)try{let e=await (0,n.H9)();e&&await (0,n.SM)(u.username,e)}catch(e){console.error("Erro ao inicializar notifica\xe7\xf5es:",e)}},f=async e=>{try{await (0,n.bA)(e),t(s=>s.map(s=>s.id===e?{...s,read:!0}:s))}catch(e){console.error("Erro ao marcar notifica\xe7\xe3o como lida:",e)}},p=async()=>{try{let e=s.filter(e=>!e.read);await Promise.all(e.map(e=>(0,n.bA)(e.id))),t(e=>e.map(e=>({...e,read:!0})))}catch(e){console.error("Erro ao marcar todas as notifica\xe7\xf5es como lidas:",e)}};return(0,a.jsx)(l.Provider,{value:{notifications:s,userRequests:o,unreadCount:x,isLoading:d,markAsRead:f,markAllAsRead:p,initializeNotifications:h},children:e})}function c(){let e=(0,r.useContext)(l);if(void 0===e)throw Error("useNotifications deve ser usado dentro de um NotificationProvider");return e}},48108:(e,s,t)=>{Promise.resolve().then(t.bind(t,60448))},60448:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\Usu\xe1rio\\\\Documents\\\\Servidor\\\\script\\\\Pedidos\\\\Pedidos\\\\src\\\\app\\\\(main)\\\\layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\Usu\xe1rio\\Documents\\Servidor\\script\\Pedidos\\Pedidos\\src\\app\\(main)\\layout.tsx","default")},70709:(e,s,t)=>{"use strict";t.d(s,{Q:()=>r});var a=t(6475);let r=(0,a.createServerReference)("007e87f2e2dbbb8d99d374e9797296581838690a1e",a.callServer,void 0,a.findSourceMapURL,"getM3UItems")},77042:(e,s,t)=>{"use strict";t.r(s),t.d(s,{XtreamProvider:()=>l,useXtream:()=>o});var a=t(60687),r=t(43210);class i{static async login(e,s){try{let t=await fetch("/api/xtream-auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:s})}),a=await t.json();if(!t.ok)throw Error(a.error||`Erro HTTP: ${t.status}`);return a}catch(e){if(console.error("❌ Erro no login Xtream:",e),e instanceof TypeError&&e.message.includes("fetch"))throw Error("Erro de conectividade. Verifique sua conex\xe3o com a internet.");throw e}}static async validateCredentials(e,s){try{return await this.login(e,s),!0}catch(e){return!1}}static async logout(e){}}let n=(0,r.createContext)(void 0);function l({children:e}){let[s,t]=(0,r.useState)(null),[l,o]=(0,r.useState)(!0),[c,d]=(0,r.useState)(!1),m=()=>{try{["@xtream_user","@xtream_auth_state","@unlocked_adult_categories","@adult_movies_unlocked","@stream_type","@last_channel"].forEach(e=>{localStorage.removeItem(e)})}catch(e){console.error("Erro ao limpar cache do usu\xe1rio:",e)}},u=(e,s)=>{try{let t=localStorage.getItem("@xtream_user");if(t){let a=JSON.parse(t),r=a.username!==e,i=a.password!==s;if(r||i)return m(),!0}return!1}catch(e){return!1}},x=async(e,s)=>{try{u(e,s);let a=await i.login(e,s);return t(a),localStorage.setItem("@xtream_user",JSON.stringify(a)),localStorage.setItem("@xtream_auth_state","true"),!0}catch(e){throw console.error("❌ Erro no login IPTV:",e),e}},h=async()=>{try{let e=s?.username;e&&await i.logout(e),t(null),localStorage.removeItem("@xtream_user"),localStorage.removeItem("@xtream_auth_state"),m()}catch(e){t(null),localStorage.removeItem("@xtream_user"),localStorage.removeItem("@xtream_auth_state"),m()}};return(0,a.jsx)(n.Provider,{value:{userInfo:s,isLoading:l,isAuthenticated:!!s,isAutoLoggingIn:c,login:x,logout:h},children:e})}function o(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useXtream must be used within a XtreamProvider");return e}},78291:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>ef});var a=t(60687),r=t(43210),i=t(85814),n=t.n(i),l=t(16189),o=t(24026),c=t(24555),d=t(80489),m=t(76976),u=t(77368),x=t(29333),h=t(58595),f=t(49497),p=t(4780),g=t(77042),j=t(29523),v=t(29867),N=t(63503),y=t(96834),w=t(44493),b=t(35950),_=t(53597),C=t(26622),S=t(15036),A=t(48206),P=t(15846),k=t(99196);function E({children:e}){let{userInfo:s}=(0,g.useXtream)();if(!s)return(0,a.jsx)(a.Fragment,{children:e});let t=()=>{if(!s.exp_date||"0"===s.exp_date||null===s.exp_date)return!1;try{return new Date(1e3*parseInt(s.exp_date))<new Date}catch(e){return!1}},r=t()?{label:"Expirada",variant:"destructive"}:"Active"===s.status?{label:"Ativa",variant:"default"}:{label:s.status,variant:"secondary"};return(0,a.jsxs)(N.lG,{children:[(0,a.jsx)(N.zM,{asChild:!0,children:e}),(0,a.jsxs)(N.Cf,{className:"sm:max-w-[500px]",children:[(0,a.jsxs)(N.c7,{children:[(0,a.jsxs)(N.L3,{className:"flex items-center gap-2",children:[(0,a.jsx)(h.A,{className:"w-5 h-5 text-primary"}),"Informa\xe7\xf5es da Conta IPTV"]}),(0,a.jsx)(N.rr,{children:"Detalhes completos da sua conta de acesso ao sistema."})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)(w.Zp,{children:[(0,a.jsx)(w.aR,{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(w.ZB,{className:"text-lg",children:s.username}),(0,a.jsx)(y.E,{variant:r.variant,children:r.label})]})}),(0,a.jsxs)(w.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(_.A,{className:"w-4 h-4 text-muted-foreground"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Senha"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground font-mono",children:"•".repeat(s.password.length)})]})]}),(0,a.jsx)(b.w,{}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(C.A,{className:"w-4 h-4 text-muted-foreground"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Data de Vencimento"}),(0,a.jsx)("p",{className:`text-sm ${t()?"text-red-600":"text-muted-foreground"}`,children:(e=>{if(!e||"0"===e||null===e)return"Sem vencimento";try{return new Date(1e3*parseInt(e)).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(e){return"Data inv\xe1lida"}})(s.exp_date)})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(S.A,{className:"w-4 h-4 text-muted-foreground"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Conta Criada em"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:(e=>{try{return new Date(1e3*parseInt(e)).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})}catch(e){return"Data inv\xe1lida"}})(s.created_at)})]})]})]}),(0,a.jsx)(b.w,{}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(A.A,{className:"w-4 h-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Conex\xf5es"})]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[s.active_cons,"/",s.max_connections]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(P.A,{className:"w-4 h-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Tipo de Conta"})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"1"===s.is_trial?"Trial":"Premium"})]})]}),s.allowed_output_formats&&s.allowed_output_formats.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.w,{}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(k.A,{className:"w-4 h-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Formatos Suportados"})]}),(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:s.allowed_output_formats.map((e,s)=>(0,a.jsx)(y.E,{variant:"outline",className:"text-xs",children:e.toUpperCase()},s))})]})]})]})]}),s.server_info&&(0,a.jsxs)(w.Zp,{children:[(0,a.jsxs)(w.aR,{className:"pb-3",children:[(0,a.jsx)(w.ZB,{className:"text-base",children:"Servidor IPTV"}),(0,a.jsx)(w.BT,{className:"text-sm",children:"Informa\xe7\xf5es do servidor de conex\xe3o"})]}),(0,a.jsx)(w.Wu,{className:"space-y-3",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"URL:"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:s.server_info.url})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Porta:"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:s.server_info.port})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Protocolo:"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:s.server_info.server_protocol})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:"Timezone:"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:s.server_info.timezone})]})]})})]})]})]})]})}var I=t(46952),$=t(3662),T=t(86910);function z(){let{userRequests:e}=(0,I.E)(),s={Pendente:e.filter(e=>"Pendente"===e.status).length,Adicionado:e.filter(e=>"Adicionado"===e.status).length,Comunicado:e.filter(e=>"Comunicado"===e.status).length};return 0===e.length?null:(0,a.jsxs)("div",{className:"p-4 border-t",children:[(0,a.jsxs)("div",{className:"mb-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Status dos Pedidos"}),(0,a.jsxs)("div",{className:"space-y-2",children:[s.Pendente>0&&(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(S.A,{className:"h-3 w-3 text-yellow-500"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"Pendente"})]}),(0,a.jsx)(y.E,{variant:"secondary",className:"text-xs",children:s.Pendente})]}),s.Adicionado>0&&(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)($.A,{className:"h-3 w-3 text-green-500"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"Adicionado"})]}),(0,a.jsx)(y.E,{variant:"secondary",className:"text-xs",children:s.Adicionado})]}),s.Comunicado>0&&(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(T.A,{className:"h-3 w-3 text-blue-500"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:"Comunicado"})]}),(0,a.jsx)(y.E,{variant:"secondary",className:"text-xs",children:s.Comunicado})]})]})]}),(0,a.jsx)(n(),{href:"/status-pedidos",className:"block w-full text-center text-xs text-primary hover:text-primary/80 transition-colors",children:"Ver todos os pedidos"})]})}let D=[{href:"/",label:"Solicita\xe7\xe3o de Conteudos",icon:o.A},{href:"/pedidos-adicionados",label:"Pedidos Adicionados",icon:c.A},{href:"/status-pedidos",label:"Status dos Pedidos",icon:d.A},{href:"/comunicados",label:"Comunicado Conteudos",icon:m.A},{href:"/atualizacoes",label:"Atualiza\xe7\xe3o de Conte\xfado",icon:u.A},{href:"/correcao",label:"Corre\xe7\xe3o de conteudos",icon:x.A}],R=()=>{let e=(0,l.usePathname)(),{userInfo:s,logout:t}=(0,g.useXtream)(),{toast:r}=(0,v.dj)(),i=async()=>{try{await t(),r({title:"Logout Realizado",description:"Voc\xea foi desconectado com sucesso."})}catch(e){console.error("Erro no logout:",e),r({title:"Erro no Logout",description:"Ocorreu um erro ao fazer logout.",variant:"destructive"})}};return(0,a.jsxs)("aside",{className:"w-64 flex-shrink-0 bg-card border-r flex flex-col",children:[(0,a.jsxs)("div",{className:"h-16 flex items-center px-6 border-b",children:[(0,a.jsx)(m.A,{className:"w-8 h-8 mr-3 text-primary"}),(0,a.jsx)("h1",{className:"text-xl font-bold tracking-tight lg:hidden",children:"Pedidos Cine"})]}),(0,a.jsx)("nav",{className:"flex-grow px-4 py-6",children:(0,a.jsx)("ul",{className:"space-y-2",children:D.map(s=>(0,a.jsx)("li",{children:(0,a.jsxs)(n(),{href:s.href,className:(0,p.cn)("flex items-center gap-3 px-4 py-2 rounded-md text-base font-medium transition-colors",e===s.href?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[(0,a.jsx)(s.icon,{className:"w-5 h-5"}),s.label]})},s.label))})}),(0,a.jsxs)("div",{className:"p-4 border-t",children:[s&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(E,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg cursor-pointer hover:bg-muted/70 transition-colors",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:(0,a.jsx)(h.A,{className:"w-4 h-4 text-primary"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium truncate",children:s.username}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Status: ",s.status]})]})]})})}),(0,a.jsx)(z,{}),(0,a.jsxs)(j.$,{variant:"outline",size:"sm",onClick:i,className:"w-full flex items-center gap-2 text-muted-foreground hover:text-foreground",children:[(0,a.jsx)(f.A,{className:"w-4 h-4"}),"Logout"]}),(0,a.jsx)("div",{className:"text-center mt-4 text-muted-foreground text-xs",children:(0,a.jsxs)("p",{children:["Pedidos Cine \xa9 ",new Date().getFullYear()]})})]})]})};var V=t(19210),L=t(17357),U=t(14947),F=t(24343),M=t(64181),X=t(57207),q=t(21342),O=t(18862),B=t(94229),Z=t(72963),J=t(78726);function W({notification:e,isOpen:s,onClose:t}){return e?(0,a.jsx)(N.lG,{open:s,onOpenChange:t,children:(0,a.jsxs)(N.Cf,{className:"max-w-md",children:[(0,a.jsxs)(N.c7,{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(e=>{switch(e){case"request_status":return(0,a.jsx)(S.A,{className:"h-5 w-5 text-yellow-500"});case"request_added":return(0,a.jsx)($.A,{className:"h-5 w-5 text-green-500"});case"communication":return(0,a.jsx)(T.A,{className:"h-5 w-5 text-blue-500"});case"new_content":return(0,a.jsx)(Z.A,{className:"h-5 w-5 text-purple-500"});default:return(0,a.jsx)(Z.A,{className:"h-5 w-5 text-gray-500"})}})(e.type),(0,a.jsx)(N.L3,{className:"text-lg",children:e.title})]}),(0,a.jsx)(j.$,{variant:"ghost",size:"icon",onClick:t,children:(0,a.jsx)(J.A,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[(0,a.jsx)(y.E,{className:(e=>{switch(e){case"request_status":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400";case"request_added":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"communication":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"new_content":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}})(e.type),children:(e=>{switch(e){case"request_status":return"Status do Pedido";case"request_added":return"Pedido Adicionado";case"communication":return"Comunicado";case"new_content":return"Novo Conte\xfado";default:return"Notifica\xe7\xe3o"}})(e.type)}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:(0,O.m)(new Date(e.createdAt),{addSuffix:!0,locale:B.F})})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(N.rr,{className:"text-sm leading-relaxed",children:e.body}),e.data&&(0,a.jsxs)("div",{className:"space-y-2",children:[e.data.contentTitle&&(0,a.jsxs)("div",{className:"bg-muted/50 rounded-lg p-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-1",children:"Conte\xfado:"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.data.contentTitle})]}),e.data.status&&(0,a.jsxs)("div",{className:"bg-muted/50 rounded-lg p-3",children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-1",children:"Status:"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e.data.status})]}),e.data.message&&(0,a.jsxs)("div",{className:"bg-blue-50 dark:bg-blue-950/20 rounded-lg p-3 border-l-4 border-blue-500",children:[(0,a.jsx)("p",{className:"text-sm font-medium mb-1 text-blue-700 dark:text-blue-300",children:"Mensagem:"}),(0,a.jsx)("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:e.data.message})]})]})]}),(0,a.jsx)("div",{className:"flex justify-end gap-2 pt-4",children:(0,a.jsx)(j.$,{variant:"outline",onClick:t,children:"Fechar"})})]})}):null}var Y=t(7605);function H(){let{notifications:e,unreadCount:s,markAsRead:t,markAllAsRead:i}=(0,I.E)(),[n,l]=(0,r.useState)(!1),[o,c]=(0,r.useState)(null),[d,m]=(0,r.useState)(!1),{toast:u}=(0,v.dj)(),{userInfo:x}=(0,g.useXtream)(),h=async e=>{await t(e.id),c(e),m(!0),l(!1)},f=async()=>{await i()},N=async()=>{if(x?.username)try{await (0,Y.XC)(x.username),u({title:"Notifica\xe7\xf5es Limpas",description:"Todas as notifica\xe7\xf5es foram removidas com sucesso."})}catch(e){console.error("Erro ao limpar notifica\xe7\xf5es:",e),u({title:"Erro",description:"N\xe3o foi poss\xedvel limpar as notifica\xe7\xf5es.",variant:"destructive"})}},w=e=>{switch(e){case"request_added":return"\uD83C\uDFAC";case"new_content":return"\uD83D\uDCFA";case"request_status":return"\uD83D\uDCCB";case"communication":return"\uD83D\uDCAC";default:return"\uD83D\uDD14"}},b=e=>{switch(e){case"request_added":return"text-green-600";case"new_content":return"text-blue-600";case"request_status":return"text-yellow-600";case"communication":return"text-purple-600";default:return"text-gray-600"}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(q.rI,{open:n,onOpenChange:l,children:[(0,a.jsx)(q.ty,{asChild:!0,children:(0,a.jsxs)(j.$,{variant:"ghost",size:"icon",className:"relative",children:[(0,a.jsx)(M.A,{className:"h-5 w-5"}),s>0&&(0,a.jsx)(y.E,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:s>99?"99+":s})]})}),(0,a.jsxs)(q.SQ,{align:"end",className:"w-80 max-h-96 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 border-b",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Notifica\xe7\xf5es"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[s>0&&(0,a.jsx)(j.$,{variant:"ghost",size:"sm",onClick:f,className:"text-xs",children:"Marcar como lidas"}),e.length>0&&(0,a.jsxs)(j.$,{variant:"ghost",size:"sm",onClick:N,className:"text-xs text-destructive hover:text-destructive",children:[(0,a.jsx)(X.A,{className:"h-3 w-3 mr-1"}),"Limpar"]})]})]}),0===e.length?(0,a.jsxs)("div",{className:"p-4 text-center text-muted-foreground",children:[(0,a.jsx)(M.A,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,a.jsx)("p",{children:"Nenhuma notifica\xe7\xe3o"})]}):(0,a.jsx)("div",{className:"max-h-80 overflow-y-auto",children:e.map(e=>(0,a.jsxs)(q._2,{className:(0,p.cn)("flex items-start gap-3 p-3 cursor-pointer hover:bg-accent",!e.read&&"bg-blue-50 dark:bg-blue-950/20"),onClick:()=>h(e),children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("span",{className:"text-lg",children:w(e.type)})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsx)("h4",{className:(0,p.cn)("text-sm font-medium truncate",b(e.type)),children:e.title}),!e.read&&(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full flex-shrink-0 ml-2"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1 line-clamp-2",children:e.body}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-2",children:(0,O.m)(new Date(e.createdAt),{addSuffix:!0,locale:B.F})})]})]},e.id))})]})]}),(0,a.jsx)(W,{notification:o,isOpen:d,onClose:()=>{m(!1),c(null)}})]})}let Q=({onMenuClick:e})=>(0,a.jsx)("header",{className:"bg-card/30 backdrop-blur-lg border-b sticky top-0 z-10",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[(0,a.jsxs)(j.$,{variant:"ghost",size:"icon",onClick:e,className:"mr-4 lg:hidden",children:[(0,a.jsx)(F.A,{className:"h-6 w-6"}),(0,a.jsx)("span",{className:"sr-only",children:"Abrir Menu"})]}),(0,a.jsx)("div",{className:"hidden lg:flex items-center",children:(0,a.jsx)("h1",{className:"text-xl font-bold tracking-tight",children:"Pedidos Cine"})}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)(H,{})})]})});var G=t(10991),K=t(24224);let ee=G.bL;G.l9,G.bm;let es=G.ZL,et=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(G.hJ,{className:(0,p.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s,ref:t}));et.displayName=G.hJ.displayName;let ea=(0,K.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),er=r.forwardRef(({side:e="right",className:s,children:t,...r},i)=>(0,a.jsxs)(es,{children:[(0,a.jsx)(et,{}),(0,a.jsxs)(G.UC,{ref:i,className:(0,p.cn)(ea({side:e}),s),...r,children:[t,(0,a.jsxs)(G.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,a.jsx)(J.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));er.displayName=G.UC.displayName;let ei=({className:e,...s})=>(0,a.jsx)("div",{className:(0,p.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...s});ei.displayName="SheetHeader";let en=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(G.hE,{ref:t,className:(0,p.cn)("text-lg font-semibold text-foreground",e),...s}));en.displayName=G.hE.displayName,r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(G.VY,{ref:t,className:(0,p.cn)("text-sm text-muted-foreground",e),...s})).displayName=G.VY.displayName;var el=t(89667),eo=t(80013);function ec(){let[e,s]=(0,r.useState)(""),[t,i]=(0,r.useState)(""),[n,l]=(0,r.useState)(!1),{login:o}=(0,g.useXtream)(),{toast:c}=(0,v.dj)(),d=async s=>{s.preventDefault(),l(!0);try{await o(e,t),c({title:"Login Realizado",description:"Autentica\xe7\xe3o IPTV realizada com sucesso!"})}catch(s){console.error("Erro no login IPTV:",s);let e="Erro desconhecido. Tente novamente.";s instanceof Error&&(e=s.message),c({title:"Erro de Autentica\xe7\xe3o",description:e,variant:"destructive"})}finally{l(!1)}};return(0,a.jsxs)("div",{className:"flex flex-col min-h-screen bg-background text-foreground",children:[(0,a.jsx)("div",{className:"flex-grow flex items-center justify-center p-4",children:(0,a.jsxs)(w.Zp,{className:"w-full max-w-md",children:[(0,a.jsxs)(w.aR,{className:"text-center",children:[(0,a.jsx)("div",{className:"flex justify-center items-center mb-4",children:(0,a.jsx)(P.A,{className:"w-12 h-12 text-primary"})}),(0,a.jsx)(w.ZB,{className:"text-2xl",children:"Autentica\xe7\xe3o IPTV"}),(0,a.jsx)(w.BT,{children:"Entre com suas credenciais IPTV para acessar o sistema de pedidos."})]}),(0,a.jsx)(w.Wu,{children:(0,a.jsxs)("form",{onSubmit:d,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(eo.J,{htmlFor:"username",children:"Usu\xe1rio IPTV"}),(0,a.jsx)(el.p,{id:"username",type:"text",placeholder:"Seu usu\xe1rio IPTV",value:e,onChange:e=>s(e.target.value),required:!0,disabled:n})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(eo.J,{htmlFor:"password",children:"Senha IPTV"}),(0,a.jsx)(el.p,{id:"password",type:"password",placeholder:"Sua senha IPTV",value:t,onChange:e=>i(e.target.value),required:!0,disabled:n})]}),(0,a.jsx)(j.$,{type:"submit",className:"w-full",disabled:n,children:n?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary-foreground mr-2"}),"Autenticando..."]}):"Entrar"})]})})]})}),(0,a.jsx)("footer",{className:"text-center p-4 text-muted-foreground text-sm",children:(0,a.jsxs)("p",{children:["Pedidos Cine \xa9 ",new Date().getFullYear()]})})]})}function ed({children:e}){let{isAuthenticated:s,isLoading:t,isAutoLoggingIn:r}=(0,g.useXtream)();return t||r?(0,a.jsx)("div",{className:"flex flex-col min-h-screen bg-background text-foreground",children:(0,a.jsx)("div",{className:"flex-grow flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-medium",children:r?"Conectando automaticamente...":"Carregando..."}),(0,a.jsx)("p",{className:"text-muted-foreground",children:r?"Verificando suas credenciais IPTV":"Inicializando sistema"})]})]})})}):s?(0,a.jsx)(a.Fragment,{children:e}):(0,a.jsx)(ec,{})}function em({children:e}){return(0,a.jsx)(g.XtreamProvider,{children:(0,a.jsx)(ed,{children:e})})}var eu=t(97025);function ex(){let[e,s]=(0,r.useState)("default"),[t,i]=(0,r.useState)(!1),{initializeNotifications:n}=(0,I.E)(),l=async()=>{try{let e=await Notification.requestPermission();s(e),i(!1),"granted"===e&&await n()}catch(e){console.error("Erro ao solicitar permiss\xe3o de notifica\xe7\xe3o:",e)}};return t&&"default"===e?(0,a.jsx)("div",{className:"fixed bottom-4 right-4 z-50",children:(0,a.jsxs)(w.Zp,{className:"w-80 shadow-lg border-blue-200 dark:border-blue-800",children:[(0,a.jsxs)(w.aR,{className:"pb-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(M.A,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)(w.ZB,{className:"text-base",children:"Ativar Notifica\xe7\xf5es"})]}),(0,a.jsx)(w.BT,{children:"Receba notifica\xe7\xf5es sobre seus pedidos e novos conte\xfados adicionados."})]}),(0,a.jsxs)(w.Wu,{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,a.jsx)("p",{children:"• Status dos seus pedidos"}),(0,a.jsx)("p",{children:"• Novos conte\xfados adicionados"}),(0,a.jsx)("p",{children:"• Comunicados sobre seus pedidos"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(j.$,{onClick:l,className:"flex-1",size:"sm",children:[(0,a.jsx)($.A,{className:"h-4 w-4 mr-2"}),"Ativar"]}),(0,a.jsxs)(j.$,{variant:"outline",onClick:()=>i(!1),size:"sm",children:[(0,a.jsx)(eu.A,{className:"h-4 w-4 mr-2"}),"Depois"]})]})]})]})}):null}function eh(){return null}function ef({children:e}){let[s,t]=(0,r.useState)(!1);return(0,a.jsx)(em,{children:(0,a.jsx)(V.L,{children:(0,a.jsxs)(I.p,{children:[(0,a.jsx)(eh,{}),(0,a.jsx)(L.A,{}),(0,a.jsxs)("div",{className:"flex h-screen bg-background text-foreground",children:[(0,a.jsx)("div",{className:"hidden lg:flex lg:flex-shrink-0",children:(0,a.jsx)(R,{})}),(0,a.jsx)(ee,{open:s,onOpenChange:t,children:(0,a.jsxs)(er,{side:"left",className:"p-0 w-64",children:[(0,a.jsx)(ei,{children:(0,a.jsx)(en,{className:"sr-only",children:"Menu"})}),(0,a.jsx)(R,{})]})}),(0,a.jsxs)("div",{className:"flex flex-col flex-1 overflow-hidden",children:[(0,a.jsx)(Q,{onMenuClick:()=>t(!0)}),(0,a.jsx)("main",{className:"flex-1 overflow-y-auto",children:e})]})]}),(0,a.jsx)(U.l,{}),(0,a.jsx)(ex,{})]})})})}}};