(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[266],{1007:(e,a,s)=>{"use strict";s.d(a,{A:()=>u});var t=s(5155),r=s(6766),l=s(6695),i=s(6126),n=s(2115),o=s(7655),c=s(9434);let d=n.forwardRef((e,a)=>{let{className:s,children:r,...l}=e;return(0,t.jsxs)(o.bL,{ref:a,className:(0,c.cn)("relative overflow-hidden",s),...l,children:[(0,t.jsx)(o.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,t.jsx)(m,{}),(0,t.jsx)(o.OK,{})]})});d.displayName=o.bL.displayName;let m=n.forwardRef((e,a)=>{let{className:s,orientation:r="vertical",...l}=e;return(0,t.jsx)(o.VM,{ref:a,orientation:r,className:(0,c.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...l,children:(0,t.jsx)(o.lr,{className:"relative flex-1 rounded-full bg-border"})})});function u(e){let{item:a,showCategory:s=!0}=e;return(0,t.jsxs)(l.Zp,{className:"flex flex-col h-full overflow-hidden transition-all duration-300",children:[(0,t.jsx)(l.aR,{className:"p-0",children:(0,t.jsx)("div",{className:"aspect-[2/3] relative",children:(0,t.jsx)(r.default,{src:a.logo||"https://placehold.co/400x600.png",alt:"Cover for ".concat(a.name),fill:!0,sizes:"(max-width: 640px) 100vw, (max-width: 768px) 50vw, (max-width: 1024px) 33vw, 20vw",className:"object-cover","data-ai-hint":"movie poster"})})}),(0,t.jsxs)(l.Wu,{className:"flex-grow p-4 space-y-2",children:[(0,t.jsx)(l.ZB,{className:"text-lg font-bold leading-tight line-clamp-2",children:a.name}),(0,t.jsx)(d,{className:"h-24",children:(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:a.synopsis||"No synopsis available."})})]}),s&&a.category&&(0,t.jsx)(l.wL,{className:"p-4 pt-0",children:(0,t.jsx)(i.E,{variant:"secondary",className:"truncate",children:a.category})})]})}m.displayName=o.VM.displayName},2349:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>y});var t=s(5155),r=s(2115),l=s(2523),i=s(5074),n=s(1007),o=s(6695),c=s(8811),d=s(4165),m=s(285),u=s(5057),x=s(8539),p=s(7481),h=s(3235),f=s(5832);function v(e){let{item:a}=e,{toast:s}=(0,p.dj)(),[l,i]=(0,r.useState)(""),[n,o]=(0,r.useState)(!1),[c,v]=(0,r.useState)(!1),g=async e=>{if(e.preventDefault(),l.trim().length<10)return void s({title:"Descri\xe7\xe3o Inv\xe1lida",description:"Por favor, descreva o problema com pelo menos 10 caracteres.",variant:"destructive"});v(!0);try{await (0,f.HJ)({title:a.name,problem:l,logo:a.logo}),s({title:"Relat\xf3rio de Corre\xe7\xe3o Enviado!",description:'Recebemos seu relat\xf3rio para "'.concat(a.name,'". Obrigado por ajudar!')}),o(!1),i("")}catch(e){s({title:"Erro ao Enviar Relat\xf3rio",description:"N\xe3o foi poss\xedvel enviar seu relat\xf3rio. Tente novamente.",variant:"destructive"})}finally{v(!1)}};return(0,t.jsxs)(d.lG,{open:n,onOpenChange:o,children:[(0,t.jsx)(d.zM,{asChild:!0,children:(0,t.jsxs)(m.$,{variant:"outline",className:"w-full",children:[(0,t.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Corrigir"]})}),(0,t.jsx)(d.Cf,{className:"sm:max-w-[425px]",children:(0,t.jsxs)("form",{onSubmit:g,children:[(0,t.jsxs)(d.c7,{children:[(0,t.jsx)(d.L3,{children:"Relatar Problema"}),(0,t.jsxs)(d.rr,{children:['Descreva o problema que voc\xea encontrou com "',a.name,'".']})]}),(0,t.jsx)("div",{className:"grid gap-4 py-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 items-start gap-2",children:[(0,t.jsx)(u.J,{htmlFor:"issue",className:"text-left",children:"Qual o problema?"}),(0,t.jsx)(x.T,{id:"issue",value:l,onChange:e=>i(e.target.value),className:"col-span-3 min-h-[120px]",placeholder:"Ex: \xc1udio dessincronizado, imagem de baixa qualidade, epis\xf3dio errado, etc.",disabled:c})]})}),(0,t.jsxs)(d.Es,{children:[(0,t.jsx)(d.HM,{asChild:!0,children:(0,t.jsx)(m.$,{type:"button",variant:"secondary",disabled:c,children:"Cancelar"})}),(0,t.jsx)(m.$,{type:"submit",disabled:c,children:c?"Enviando...":"Enviar Relat\xf3rio"})]})]})})]})}var g=s(5476),j=s(7313);let N=s(9509).env.NEXT_PUBLIC_TMDB_API_KEY||"279e039eafd4ccc7c289a589c9b613e3";function y(){let[e,a]=(0,r.useState)(""),[s,d]=(0,r.useState)("all"),[m,u]=(0,r.useState)(!1),[x,p]=(0,r.useState)([]),{m3uItems:h,allM3uItems:f,isInitialLoading:y}=(0,r.useContext)(g.z),b=e=>e?e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s]/gi,"").trim():"",w=async e=>{try{let a=e.name.replace(/\s*\[.*?\]\s*/g,"").replace(/\s*\(\d{4}\)\s*$/,"").trim(),t="movie"===s?["movie"]:"series"===s?["tv"]:["movie","tv"],r=t.map(e=>fetch("https://api.themoviedb.org/3/search/".concat(e,"?api_key=").concat(N,"&query=").concat(encodeURIComponent(a),"&language=pt-BR")).then(e=>e.ok?e.json():Promise.resolve({results:[]}))),l=(await Promise.all(r)).flatMap((e,a)=>(e.results||[]).map(e=>({...e,searchType:t[a]}))),i=b(a),n=l.sort((a,s)=>{let t=b(a.title||a.name||""),r=b(s.title||s.name||""),l=t===i?3:t.startsWith(i)?2:+!!t.includes(i),n=r===i?3:r.startsWith(i)?2:+!!r.includes(i);return n!==l?n-l:"series"===e.type&&"tv"===s.searchType?1:"series"===e.type&&"tv"===a.searchType?-1:"movie"===e.type&&"movie"===s.searchType?1:"movie"===e.type&&"movie"===a.searchType?-1:(s.popularity||0)-(a.popularity||0)})[0];if(n)return{...e,synopsis:n.overview||"Nenhuma sinopse dispon\xedvel.",logo:n.poster_path?"".concat("https://image.tmdb.org/t/p/w500").concat(n.poster_path):e.logo,category:"tv"===n.searchType?"S\xe9rie":"Filme"};return e}catch(a){return console.error("Error fetching from TMDB for details:",a),e}},S=(0,r.useCallback)(async(e,a)=>{if(y||e.trim().length<3)return void p([]);u(!0);let s=b(e),t=f.filter(e=>"all"===a||e.type===a).filter(e=>b(e.name).includes(s)).map(e=>({...e,status:"loading"}));p(t),u(!1),t.forEach(async e=>{try{let a=await w(e);p(s=>{let t=[...s],r=t.findIndex(a=>a.name===e.name&&"loading"===a.status);return -1!==r&&(t[r]={...a,status:"loaded"}),t.sort((e,a)=>e.name.localeCompare(a.name))})}catch(a){p(a=>{let s=[...a],t=s.findIndex(a=>a.name===e.name&&"loading"===a.status);return -1!==t&&(s[t]={...e,status:"loaded"}),s.sort((e,a)=>e.name.localeCompare(a.name))})}})},[f,y]);return(0,r.useEffect)(()=>{let a=setTimeout(()=>{S(e,s)},500);return()=>clearTimeout(a)},[e,s,S]),(0,t.jsxs)("div",{className:"flex flex-col min-h-screen bg-background text-foreground",children:[(0,t.jsx)("div",{className:"flex-grow container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-2xl lg:text-3xl font-bold tracking-tight text-primary",children:"Corrigir um Conte\xfado"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Encontrou um problema? Busque o conte\xfado e nos informe."})]}),(0,t.jsxs)("div",{className:"flex flex-col w-full max-w-2xl mx-auto items-center space-y-4",children:[(0,t.jsx)(j.tU,{value:s,onValueChange:d,children:(0,t.jsxs)(j.j7,{children:[(0,t.jsx)(j.Xi,{value:"all",children:"Todos"}),(0,t.jsx)(j.Xi,{value:"movie",children:"Filmes"}),(0,t.jsx)(j.Xi,{value:"series",children:"S\xe9ries"})]})}),(0,t.jsxs)("div",{className:"relative w-full flex-grow",children:[(0,t.jsx)(i.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,t.jsx)(l.p,{type:"text",placeholder:"Digite o nome d".concat("series"===s?"a s\xe9rie":"o filme"," para corrigir..."),value:e,onChange:e=>a(e.target.value),className:"pl-10 text-lg py-6 rounded-full shadow-inner bg-card",disabled:y}),(m||y)&&(0,t.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary"})})]})]}),(0,t.jsx)("div",{className:"pt-8",children:e.length>2&&x.length>0?(0,t.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 md:gap-6",children:x.map((e,a)=>"loading"===e.status?(0,t.jsx)(c.A,{},"skeleton-".concat(a)):(0,t.jsxs)("div",{className:"flex flex-col gap-2 items-center",children:[(0,t.jsx)(n.A,{item:e}),(0,t.jsx)(v,{item:e})]},"result-".concat(a)))}):e.length>2&&!m&&(0,t.jsx)(o.Zp,{className:"text-center py-10 px-6 border-dashed bg-card",children:(0,t.jsxs)(o.Wu,{children:[(0,t.jsx)("h3",{className:"text-xl font-semibold text-card-foreground mb-2",children:"Nenhum resultado encontrado na sua lista"}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:['N\xe3o encontramos nenhum conte\xfado para "',e,'" na sua lista M3U. Verifique o t\xedtulo ou se o item realmente existe.']})]})})})]})}),(0,t.jsx)("footer",{className:"text-center p-4 text-muted-foreground text-sm",children:(0,t.jsxs)("p",{children:["Pedidos Cine \xa9 ",new Date().getFullYear()]})})]})}},3073:(e,a,s)=>{Promise.resolve().then(s.bind(s,2349))},3235:(e,a,s)=>{"use strict";s.d(a,{A:()=>t});let t=(0,s(157).A)("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]])},4477:(e,a,s)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),!function(e,a){for(var s in a)Object.defineProperty(e,s,{enumerable:!0,get:a[s]})}(a,{callServer:function(){return t.callServer},createServerReference:function(){return l},findSourceMapURL:function(){return r.findSourceMapURL}});let t=s(3806),r=s(1818),l=s(4979).createServerReference},4760:(e,a,s)=>{"use strict";s.d(a,{Q:()=>r});var t=s(4477);let r=(0,t.createServerReference)("007e87f2e2dbbb8d99d374e9797296581838690a1e",t.callServer,void 0,t.findSourceMapURL,"getM3UItems")},5476:(e,a,s)=>{"use strict";s.d(a,{z:()=>o,L:()=>u});var t=s(5155),r=s(2115),l=s(4760),i=s(4477);let n=(0,i.createServerReference)("00aef7fe477b36c101029c0e540702e6f4225a9e00",i.callServer,void 0,i.findSourceMapURL,"getAllM3UItems"),o=(0,r.createContext)({m3uItems:[],allM3uItems:[],isInitialLoading:!0}),c=null,d=null,m=!1,u=e=>{let{children:a}=e,[s,i]=(0,r.useState)(c||[]),[u,x]=(0,r.useState)(d||[]),[p,h]=(0,r.useState)(!m);return(0,r.useEffect)(()=>{(async()=>{if(!m)try{let[e,a]=await Promise.all([(0,l.Q)(),n()]);c=e,d=a,i(e),x(a)}catch(e){console.error("Failed to load M3U items for context:",e),c=[],d=[],i([]),x([])}finally{h(!1),m=!0}})()},[]),(0,t.jsx)(o.Provider,{value:{m3uItems:s,allM3uItems:u,isInitialLoading:p},children:a})}},8811:(e,a,s)=>{"use strict";s.d(a,{A:()=>n});var t=s(5155),r=s(9434);function l(e){let{className:a,...s}=e;return(0,t.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",a),...s})}var i=s(6695);function n(){return(0,t.jsxs)(i.Zp,{className:"flex flex-col h-full overflow-hidden",children:[(0,t.jsx)(i.aR,{className:"p-0",children:(0,t.jsx)(l,{className:"aspect-[2/3] w-full"})}),(0,t.jsxs)(i.Wu,{className:"flex-grow p-4 space-y-2",children:[(0,t.jsx)(l,{className:"h-5 w-4/5"}),(0,t.jsxs)("div",{className:"space-y-1 pt-2",children:[(0,t.jsx)(l,{className:"h-3 w-full"}),(0,t.jsx)(l,{className:"h-3 w-full"}),(0,t.jsx)(l,{className:"h-3 w-2/3"})]})]}),(0,t.jsx)(i.wL,{className:"p-4 pt-0",children:(0,t.jsx)(l,{className:"h-5 w-1/2"})})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[135,184,248,446,696,327,405,441,684,358],()=>a(3073)),_N_E=e.O()}]);