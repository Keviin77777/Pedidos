(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[619],{518:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(157).A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},594:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(157).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},1007:(e,a,t)=>{"use strict";t.d(a,{A:()=>m});var s=t(5155),r=t(6766),l=t(6695),i=t(6126),n=t(2115),o=t(7655),d=t(9434);let c=n.forwardRef((e,a)=>{let{className:t,children:r,...l}=e;return(0,s.jsxs)(o.bL,{ref:a,className:(0,d.cn)("relative overflow-hidden",t),...l,children:[(0,s.jsx)(o.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,s.jsx)(u,{}),(0,s.jsx)(o.OK,{})]})});c.displayName=o.bL.displayName;let u=n.forwardRef((e,a)=>{let{className:t,orientation:r="vertical",...l}=e;return(0,s.jsx)(o.VM,{ref:a,orientation:r,className:(0,d.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...l,children:(0,s.jsx)(o.lr,{className:"relative flex-1 rounded-full bg-border"})})});function m(e){let{item:a,showCategory:t=!0}=e;return(0,s.jsxs)(l.Zp,{className:"flex flex-col h-full overflow-hidden transition-all duration-300",children:[(0,s.jsx)(l.aR,{className:"p-0",children:(0,s.jsx)("div",{className:"aspect-[2/3] relative",children:(0,s.jsx)(r.default,{src:a.logo||"https://placehold.co/400x600.png",alt:"Cover for ".concat(a.name),fill:!0,sizes:"(max-width: 640px) 100vw, (max-width: 768px) 50vw, (max-width: 1024px) 33vw, 20vw",className:"object-cover","data-ai-hint":"movie poster"})})}),(0,s.jsxs)(l.Wu,{className:"flex-grow p-4 space-y-2",children:[(0,s.jsx)(l.ZB,{className:"text-lg font-bold leading-tight line-clamp-2",children:a.name}),(0,s.jsx)(c,{className:"h-24",children:(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:a.synopsis||"No synopsis available."})})]}),t&&a.category&&(0,s.jsx)(l.wL,{className:"p-4 pt-0",children:(0,s.jsx)(i.E,{variant:"secondary",className:"truncate",children:a.category})})]})}u.displayName=o.VM.displayName},4477:(e,a,t)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),!function(e,a){for(var t in a)Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}(a,{callServer:function(){return s.callServer},createServerReference:function(){return l},findSourceMapURL:function(){return r.findSourceMapURL}});let s=t(3806),r=t(1818),l=t(4979).createServerReference},4510:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>O});var s=t(5155),r=t(2115),l=t(2523),i=t(5074),n=t(1007),o=t(7481),d=t(6695),c=t(8811),u=t(4165),m=t(285),p=t(5057),h=t(8539),x=t(157);let g=(0,x.A)("FilePlus2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M3 15h6",key:"4e2qda"}],["path",{d:"M6 12v6",key:"1u72j0"}]]),v=(0,x.A)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var f=t(5832),j=t(9542);function y(){let{toast:e}=(0,o.dj)(),{userInfo:a}=(0,j.n)(),[t,i]=(0,r.useState)(""),[n,d]=(0,r.useState)(""),[c,x]=(0,r.useState)(""),[y,N]=(0,r.useState)(null),[b,w]=(0,r.useState)(""),[S,C]=(0,r.useState)(!1),[E,_]=(0,r.useState)(!1),M=(0,r.useRef)(null),P=e=>{x(e),N(null),w("")},k=async s=>{if(s.preventDefault(),t.trim().length<2)return void e({title:"T\xedtulo Inv\xe1lido",description:"O t\xedtulo deve ter pelo menos 2 caracteres.",variant:"destructive"});_(!0);try{let s=c;y&&b&&(s=b),await (0,f.Mm)({title:t,notes:n,type:"Pedido Manual",logo:s||null,username:(null==a?void 0:a.username)||"Usu\xe1rio desconhecido"}),e({title:"Pedido Manual Enviado!",description:'Recebemos seu pedido para "'.concat(t,'".')}),C(!1),i(""),d(""),x(""),N(null),w("")}catch(a){e({title:"Erro ao Enviar Pedido",description:"N\xe3o foi poss\xedvel enviar seu pedido. Tente novamente.",variant:"destructive"})}finally{_(!1)}};return(0,s.jsxs)(u.lG,{open:S,onOpenChange:C,children:[(0,s.jsx)(u.zM,{asChild:!0,children:(0,s.jsxs)(m.$,{variant:"ghost",className:"text-sm text-muted-foreground",children:[(0,s.jsx)(g,{className:"mr-2 h-4 w-4"}),"N\xe3o encontrou? Pe\xe7a manualmente"]})}),(0,s.jsx)(u.Cf,{className:"sm:max-w-[425px]",children:(0,s.jsxs)("form",{onSubmit:k,children:[(0,s.jsxs)(u.c7,{children:[(0,s.jsx)(u.L3,{children:"Pedir Conte\xfado Manualmente"}),(0,s.jsx)(u.rr,{children:"Use este formul\xe1rio se n\xe3o encontrou o que procurava na busca."})]}),(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,s.jsx)(p.J,{htmlFor:"title",className:"text-right",children:"T\xedtulo"}),(0,s.jsx)(l.p,{id:"title",value:t,onChange:e=>i(e.target.value),className:"col-span-3",placeholder:"Ex: O Poderoso Chef\xe3o (1972)",disabled:E})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-start gap-4",children:[(0,s.jsx)(p.J,{htmlFor:"notes",className:"text-right pt-2",children:"Observa\xe7\xe3o"}),(0,s.jsx)(h.T,{id:"notes",value:n,onChange:e=>d(e.target.value),className:"col-span-3",placeholder:"Alguma informa\xe7\xe3o adicional? Ex: Vers\xe3o do diretor, dublagem espec\xedfica, etc.",disabled:E})]}),(0,s.jsxs)("div",{className:"grid grid-cols-4 items-start gap-4",children:[(0,s.jsx)(p.J,{className:"text-right pt-2",children:"Imagem"}),(0,s.jsxs)("div",{className:"col-span-3 space-y-3",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{htmlFor:"imageUrl",className:"text-sm text-muted-foreground",children:"URL da imagem (opcional)"}),(0,s.jsx)(l.p,{id:"imageUrl",type:"url",value:c,onChange:e=>P(e.target.value),placeholder:"https://exemplo.com/imagem.jpg",disabled:E})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(p.J,{className:"text-sm text-muted-foreground",children:"Ou fa\xe7a upload de uma imagem (JPG, JPEG, PNG)"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(m.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{var e;return null==(e=M.current)?void 0:e.click()},disabled:E,children:[(0,s.jsx)(v,{className:"mr-2 h-4 w-4"}),"Escolher arquivo"]}),(0,s.jsx)("input",{ref:M,type:"file",accept:".jpg,.jpeg,.png,image/jpeg,image/jpg,image/png",onChange:a=>{var t;let s=null==(t=a.target.files)?void 0:t[0];if(s){if(s.size>5242880)return void e({title:"Arquivo muito grande",description:"A imagem deve ter menos de 5MB.",variant:"destructive"});if(!["image/jpeg","image/jpg","image/png"].includes(s.type))return void e({title:"Formato n\xe3o suportado",description:"Por favor, selecione apenas imagens JPG, JPEG ou PNG.",variant:"destructive"});N(s),x("");let a=new FileReader;a.onload=e=>{var a;w(null==(a=e.target)?void 0:a.result)},a.readAsDataURL(s)}},className:"hidden",disabled:E}),y&&(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:y.name})]})]}),(b||c)&&(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)(p.J,{className:"text-sm text-muted-foreground",children:"Pr\xe9via:"}),(0,s.jsx)("div",{className:"mt-2 w-32 h-48 relative rounded-md overflow-hidden bg-muted",children:(0,s.jsx)("img",{src:b||c,alt:"Pr\xe9via da imagem",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none"}})})]})]})]})]}),(0,s.jsxs)(u.Es,{children:[(0,s.jsx)(u.HM,{asChild:!0,children:(0,s.jsx)(m.$,{type:"button",variant:"secondary",disabled:E,children:"Cancelar"})}),(0,s.jsx)(m.$,{type:"submit",disabled:E,children:E?"Enviando...":"Enviar Pedido"})]})]})})]})}var N=t(518),b=t(7313),w=t(5476);function S(e){let{item:a,children:t}=e,{toast:l}=(0,o.dj)(),{userInfo:i}=(0,j.n)(),[n,d]=(0,r.useState)(""),[c,x]=(0,r.useState)(!1),[g,v]=(0,r.useState)(!1),y=async e=>{e.preventDefault(),v(!0);try{await (0,f.Mm)({title:a.name,type:a.category,logo:a.logo,notes:n,username:(null==i?void 0:i.username)||"Usu\xe1rio desconhecido"}),l({title:"Pedido Enviado!",description:'Recebemos seu pedido para "'.concat(a.name,'".')}),x(!1),d("")}catch(e){l({title:"Erro ao Enviar",description:"N\xe3o foi poss\xedvel enviar seu pedido. Tente novamente.",variant:"destructive"})}finally{v(!1)}};return(0,s.jsxs)(u.lG,{open:c,onOpenChange:x,children:[(0,s.jsx)(u.zM,{asChild:!0,children:t}),(0,s.jsx)(u.Cf,{className:"sm:max-w-[425px]",children:(0,s.jsxs)("form",{onSubmit:y,children:[(0,s.jsxs)(u.c7,{children:[(0,s.jsxs)(u.L3,{children:['Solicitar "',a.name,'"']}),(0,s.jsx)(u.rr,{children:"Adicione uma observa\xe7\xe3o ao seu pedido, se necess\xe1rio."})]}),(0,s.jsx)("div",{className:"grid gap-4 py-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 items-start gap-2",children:[(0,s.jsx)(p.J,{htmlFor:"notes",className:"text-left",children:"Observa\xe7\xe3o (opcional)"}),(0,s.jsx)(h.T,{id:"notes",value:n,onChange:e=>d(e.target.value),className:"col-span-3 min-h-[120px]",placeholder:"Ex: \xc1udio em ingl\xeas com legenda, vers\xe3o do diretor, etc.",disabled:g})]})}),(0,s.jsxs)(u.Es,{children:[(0,s.jsx)(u.HM,{asChild:!0,children:(0,s.jsx)(m.$,{type:"button",variant:"secondary",disabled:g,children:"Cancelar"})}),(0,s.jsx)(m.$,{type:"submit",disabled:g,children:g?"Enviando...":"Confirmar Pedido"})]})]})})]})}var C=t(2085),E=t(9434);let _=(0,C.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),M=r.forwardRef((e,a)=>{let{className:t,variant:r,...l}=e;return(0,s.jsx)("div",{ref:a,role:"alert",className:(0,E.cn)(_({variant:r}),t),...l})});M.displayName="Alert",r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("h5",{ref:a,className:(0,E.cn)("mb-1 font-medium leading-none tracking-tight",t),...r})}).displayName="AlertTitle";let P=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("div",{ref:a,className:(0,E.cn)("text-sm [&_p]:leading-relaxed",t),...r})});P.displayName="AlertDescription";var k=t(594);function A(e){let{item:a,children:t}=e,[i,n]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),[x,g]=(0,r.useState)(""),[v,j]=(0,r.useState)(""),[y,N]=(0,r.useState)(""),{toast:b}=(0,o.dj)(),w=async e=>{if(e.preventDefault(),!x.trim())return void b({title:"Campo Obrigat\xf3rio",description:"Por favor, informe a temporada que deseja atualizar.",variant:"destructive"});c(!0);try{let e=v.trim()?"Temporada ".concat(x,", Epis\xf3dio ").concat(v):"Temporada ".concat(x),t="".concat(a.name," - Atualiza\xe7\xe3o: ").concat(e);await (0,f.Mm)({title:t,type:"S\xe9rie",notes:y.trim()?"".concat(e,". Observa\xe7\xe3o: ").concat(y):e,logo:a.logo||""}),b({title:"Pedido de Atualiza\xe7\xe3o Enviado!",description:"Sua solicita\xe7\xe3o foi registrada e ser\xe1 analisada pela nossa equipe."}),n(!1),g(""),j(""),N("")}catch(e){console.error("Erro ao enviar pedido de atualiza\xe7\xe3o:",e),b({title:"Erro ao Enviar Pedido",description:"N\xe3o foi poss\xedvel enviar sua solicita\xe7\xe3o. Tente novamente.",variant:"destructive"})}finally{c(!1)}};return(0,s.jsxs)(u.lG,{open:i,onOpenChange:n,children:[(0,s.jsx)(u.zM,{asChild:!0,children:t}),(0,s.jsx)(u.Cf,{className:"sm:max-w-[425px]",children:(0,s.jsxs)("form",{onSubmit:w,children:[(0,s.jsxs)(u.c7,{children:[(0,s.jsx)(u.L3,{children:"Pedir Atualiza\xe7\xe3o de S\xe9rie"}),(0,s.jsx)(u.rr,{children:"Solicite a adi\xe7\xe3o de novas temporadas ou epis\xf3dios para s\xe9ries j\xe1 dispon\xedveis no sistema."})]}),(0,s.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,s.jsxs)(M,{children:[(0,s.jsx)(k.A,{className:"h-4 w-4"}),(0,s.jsxs)(P,{children:[(0,s.jsx)("strong",{children:"Importante:"})," Certifique-se de que a temporada/epis\xf3dio j\xe1 foi lan\xe7ado oficialmente antes de fazer o pedido. N\xe3o solicitamos conte\xfado que ainda n\xe3o foi disponibilizado pelos est\xfadios."]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(p.J,{htmlFor:"season",className:"text-left",children:"Temporada *"}),(0,s.jsx)(l.p,{id:"season",value:x,onChange:e=>g(e.target.value),placeholder:"Ex: 2",className:"col-span-1",disabled:d,required:!0})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(p.J,{htmlFor:"episode",className:"text-left",children:"Epis\xf3dio (opcional)"}),(0,s.jsx)(l.p,{id:"episode",value:v,onChange:e=>j(e.target.value),placeholder:"Ex: 5",className:"col-span-1",disabled:d})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(p.J,{htmlFor:"notes",className:"text-left",children:"Observa\xe7\xe3o Adicional (opcional)"}),(0,s.jsx)(h.T,{id:"notes",value:y,onChange:e=>N(e.target.value),className:"min-h-[80px]",placeholder:"Ex: Dublagem em portugu\xeas, qualidade HD, etc.",disabled:d})]})]}),(0,s.jsxs)(u.Es,{children:[(0,s.jsx)(m.$,{type:"button",variant:"secondary",onClick:()=>n(!1),disabled:d,children:"Cancelar"}),(0,s.jsx)(m.$,{type:"submit",disabled:d,children:d?"Enviando...":"Enviar Pedido"})]})]})})]})}let I=t(9509).env.NEXT_PUBLIC_TMDB_API_KEY||"279e039eafd4ccc7c289a589c9b613e3";function T(){let[e,a]=(0,r.useState)(""),[t,u]=(0,r.useState)("multi"),[p,h]=(0,r.useState)(!1),[x,g]=(0,r.useState)(!1),[v,j]=(0,r.useState)([]),[C,E]=(0,r.useState)(new Set),[_,M]=(0,r.useState)(new Map),{m3uItems:P,allM3uItems:k,isInitialLoading:T}=(0,r.useContext)(w.z),{toast:O}=(0,o.dj)();(0,r.useEffect)(()=>{let e=(0,f.BK)(e=>{E(new Set(e.filter(e=>"Pendente"===e.status).map(e=>e.title)));let a=new Map;e.filter(e=>"Adicionado"===e.status).forEach(e=>{a.set(e.title,{category:e.addedToCategory||"Categoria n\xe3o especificada",observation:e.addedObservation})}),M(a)},e=>{console.error("Failed to listen for request updates:",e),O({title:"Erro de Sincroniza\xe7\xe3o",description:"N\xe3o foi poss\xedvel conectar para obter atualiza\xe7\xf5es de pedidos.",variant:"destructive"})});return()=>e()},[O]);let z=e=>e?e.toLowerCase().replace(/\s*(s\d{2}e\d{2}|s\d{1,2}|t\d{1,2}e\d{1,2}).*$/i,"").replace(/\s*\(\d{4}\)\s*$/,"").replace(/\s*\[[^\]]*\]\s*$/,"").normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/ & /g," e ").replace(/[^\w\s]/gi,"").replace(/\s+/g," ").trim():"",q=(e,a)=>{if(e.toLowerCase()===a.toLowerCase())return!0;let t=z(e),s=z(a);if(t===s)return!0;let r=e.toLowerCase(),l=a.toLowerCase(),i=e=>{let a={i:1,ii:2,iii:3,iv:4,v:5,vi:6,vii:7,viii:8,ix:9,x:10},t=e.split(" "),s=t[t.length-1];if(a[s])return t[t.length-1]=a[s].toString(),t.join(" ");for(let e=0;e<t.length;e++)a[t[e]]&&(t[e]=a[t[e]].toString());return t.join(" ")};if(i(r)===i(l))return!0;if(/\d/.test(r)!==/\d/.test(l)&&r.replace(/\s+\d+.*$/,"")===l.replace(/\s+\d+.*$/,""))return!0;if(r.includes("rambo")&&l.includes("rambo")&&r.replace(/rambo.*/,"rambo").trim()===l.replace(/rambo.*/,"rambo").trim())return!0;if(r.includes(":")&&!l.includes(":")||!r.includes(":")&&l.includes(":"))return!1;if(r.includes(":")&&l.includes(":")){var n,o;let e=null==(n=r.split(":")[1])?void 0:n.trim(),a=null==(o=l.split(":")[1])?void 0:o.trim();if(e&&a&&e!==a)return!1}if(r.includes("parte")&&!l.includes("parte")||!r.includes("parte")&&l.includes("parte")||r.includes("edi\xe7\xe3o")&&!l.includes("edi\xe7\xe3o")||!r.includes("edi\xe7\xe3o")&&l.includes("edi\xe7\xe3o")||r.includes("especial")&&!l.includes("especial")||!r.includes("especial")&&l.includes("especial")||r.includes("document\xe1rio")&&!l.includes("document\xe1rio")||!r.includes("document\xe1rio")&&l.includes("document\xe1rio")||r.includes("lenda")&&!l.includes("lenda")||!r.includes("lenda")&&l.includes("lenda")||r.includes("\xfaltimo")&&!l.includes("\xfaltimo")||!r.includes("\xfaltimo")&&l.includes("\xfaltimo")||r.includes("caminho")&&!l.includes("caminho")||!r.includes("caminho")&&l.includes("caminho")||r.includes("busca")&&!l.includes("busca")||!r.includes("busca")&&l.includes("busca")||r.includes("criando")&&!l.includes("criando")||!r.includes("criando")&&l.includes("criando")||r.includes("cavaleiro")&&!l.includes("cavaleiro")||!r.includes("cavaleiro")&&l.includes("cavaleiro")||r.includes("mestre")&&!l.includes("mestre")||!r.includes("mestre")&&l.includes("mestre")||r.includes("fogo")&&!l.includes("fogo")||!r.includes("fogo")&&l.includes("fogo")||r.includes("cinzas")&&!l.includes("cinzas")||!r.includes("cinzas")&&l.includes("cinzas")||r.includes("\xe1gua")&&!l.includes("\xe1gua")||!r.includes("\xe1gua")&&l.includes("\xe1gua")||r.includes("gl\xf3ria")&&!l.includes("gl\xf3ria")||!r.includes("gl\xf3ria")&&l.includes("gl\xf3ria")||r.includes("mund")&&!l.includes("mund")||!r.includes("mund")&&l.includes("mund")||r.includes("pandora")&&!l.includes("pandora")||!r.includes("pandora")&&l.includes("pandora")||r.includes("tulkun")&&!l.includes("tulkun")||!r.includes("tulkun")&&l.includes("tulkun")||r.includes("eywa")&&!l.includes("eywa")||!r.includes("eywa")&&l.includes("eywa")||r.includes("mergulho")&&!l.includes("mergulho")||!r.includes("mergulho")&&l.includes("mergulho")||r.includes("profundo")&&!l.includes("profundo")||!r.includes("profundo")&&l.includes("profundo")||r.includes("dragao")&&!l.includes("dragao")||!r.includes("dragao")&&l.includes("dragao")||r.includes("treinar")&&!l.includes("treinar")||!r.includes("treinar")&&l.includes("treinar")||r.includes("seu")&&!l.includes("seu")||!r.includes("seu")&&l.includes("seu"))return!1;let d=/\d/.test(r),c=/\d/.test(l);if(d!==c)return!1;if(d&&c){let e=r.match(/\d+/g)||[],a=l.match(/\d+/g)||[];if(e.length>0&&a.length>0&&e.join("")!==a.join(""))return!1}let u=t.split(" ").filter(e=>e.length>2),m=s.split(" ").filter(e=>e.length>2);if(u[0]===m[0]&&u.length>=1&&m.length>=1&&3>=Math.abs(t.length-s.length)){let e=u.filter(e=>!m.includes(e)),a=m.filter(e=>!u.includes(e));if(e.length>1||a.length>1||u.length>2&&1===m.length||m.length>2&&1===u.length)return!1;let t=u.filter(e=>m.includes(e)),s=Math.max(u.length,m.length);return!(t.length/s<.8)}return!1},L=async(e,a)=>{try{let t="https://api.themoviedb.org/3/search/".concat(a,"?api_key=").concat(I,"&query=").concat(encodeURIComponent(e),"&language=pt-BR"),s=await fetch(t);if(!s.ok)return console.error("TMDB API error: ".concat(s.status," ").concat(s.statusText)),[];let r=await s.json();if(r.results&&r.results.length>0)return r.results.filter(e=>("movie"===e.media_type||"tv"===e.media_type||"movie"===a||"tv"===a)&&e.poster_path).map(e=>({name:e.title||e.name,synopsis:e.overview||"Nenhuma sinopse dispon\xedvel.",logo:e.poster_path?"".concat("https://image.tmdb.org/t/p/w500").concat(e.poster_path):null,category:"tv"===e.media_type||"tv"===a?"S\xe9rie":"Filme",type:"tv"===e.media_type||"tv"===a?"series":"movie",url:""}));return[]}catch(e){return console.error("Error fetching from TMDB:",e),[]}},R=(0,r.useCallback)(async(e,a)=>{if(T||e.trim().length<3){j([]),g(!1);return}h(!0),g(!0);try{let t=await L(e,a);if(0===t.length){j([]),h(!1);return}let s=t.map(e=>{let a=C.has(e.name),t=_.has(e.name);if(a)return{...e,status:"requested"};let s=[];for(let a of k)q(e.name,a.name)&&s.push(a);if(s.length>0){let a=s[0].category;return{...e,status:"existing",existingCategory:a}}if(t){var r,l;return{...e,status:"added",addedCategory:null==(r=_.get(e.name))?void 0:r.category,addedObservation:null==(l=_.get(e.name))?void 0:l.observation}}return{...e,status:"requestable"}});j(s)}catch(e){O({title:"Erro na Busca",description:"Ocorreu um erro ao buscar. Tente novamente mais tarde.",variant:"destructive"}),j([])}finally{h(!1)}},[O,C,k,T,_]);return(0,r.useEffect)(()=>{let a=setTimeout(()=>{R(e,t)},500);return()=>clearTimeout(a)},[e,t,R]),(0,s.jsxs)("div",{className:"flex flex-col min-h-screen bg-background text-foreground",children:[(0,s.jsx)("div",{className:"flex-grow container mx-auto px-4 py-8",children:(0,s.jsxs)("div",{className:"max-w-6xl mx-auto space-y-8",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"text-2xl lg:text-3xl font-bold tracking-tight text-primary",children:"Solicitar um Filme ou S\xe9rie"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"N\xe3o encontrou o que procurava? Verifique aqui e fa\xe7a seu pedido."})]}),(0,s.jsxs)("div",{className:"flex flex-col w-full max-w-2xl mx-auto items-center space-y-4",children:[(0,s.jsx)(b.tU,{value:t,onValueChange:u,children:(0,s.jsxs)(b.j7,{children:[(0,s.jsx)(b.Xi,{value:"multi",children:"Todos"}),(0,s.jsx)(b.Xi,{value:"movie",children:"Filmes"}),(0,s.jsx)(b.Xi,{value:"tv",children:"S\xe9ries"})]})}),(0,s.jsxs)("div",{className:"relative w-full flex-grow",children:[(0,s.jsx)(i.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,s.jsx)(l.p,{type:"text",placeholder:"Digite o nome d".concat("tv"===t?"a s\xe9rie":"o filme","..."),value:e,onChange:e=>a(e.target.value),className:"pl-10 text-lg py-6 rounded-full shadow-inner bg-card",disabled:T}),p&&(0,s.jsx)("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary"})})]}),(0,s.jsx)(y,{})]}),(0,s.jsxs)("div",{className:"pt-8",children:[p&&(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 md:gap-6",children:Array.from({length:6}).map((e,a)=>(0,s.jsx)(c.A,{},"skeleton-search-".concat(a)))}),x&&!p&&(0,s.jsx)(s.Fragment,{children:v.length>0?(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 md:gap-6",children:v.map((e,a)=>"loading"===e.status?(0,s.jsx)(c.A,{},"skeleton-".concat(a)):(0,s.jsxs)("div",{className:"flex flex-col gap-2 items-center",children:[(0,s.jsx)(n.A,{item:e,showCategory:"existing"!==e.status}),"requestable"===e.status?(0,s.jsx)(S,{item:e,children:(0,s.jsx)(m.$,{className:"w-full",children:"Solicitar"})}):"requested"===e.status?(0,s.jsxs)(m.$,{variant:"outline",disabled:!0,className:"w-full cursor-default",children:[(0,s.jsx)(N.A,{className:"mr-2 h-4 w-4"}),"Solicitado"]}):"added"===e.status?(0,s.jsx)("div",{className:"flex flex-col gap-2 w-full",children:(0,s.jsxs)("div",{className:"text-center text-xs p-2 rounded-md bg-secondary text-secondary-foreground cursor-default",children:[(0,s.jsx)("p",{className:"font-bold",children:"J\xe1 est\xe1 no sistema"}),e.addedCategory&&(0,s.jsxs)("p",{className:"truncate",children:["em: ",(0,s.jsx)("span",{className:"text-green-500 font-semibold",children:e.addedCategory})]}),e.addedObservation&&(0,s.jsxs)("div",{className:"mt-1 p-1 bg-primary/10 rounded text-primary text-xs",children:[(0,s.jsx)("p",{className:"font-semibold",children:"Observa\xe7\xe3o:"}),(0,s.jsx)("p",{className:"break-words",children:e.addedObservation})]})]})}):(0,s.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,s.jsxs)("div",{className:"text-center text-xs p-2 rounded-md bg-secondary text-secondary-foreground cursor-default",children:[(0,s.jsx)("p",{className:"font-bold",children:"J\xe1 est\xe1 no sistema"}),e.existingCategory&&(0,s.jsxs)("p",{className:"truncate",children:["em: ",(0,s.jsx)("span",{className:"text-green-500 font-semibold",children:e.existingCategory})]})]}),"series"===e.type&&(0,s.jsx)(A,{item:e,children:(0,s.jsx)(m.$,{variant:"outline",size:"sm",className:"w-full text-xs",children:"Pedir Atualiza\xe7\xe3o"})})]})]},"result-".concat(a)))}):e.length>2&&(0,s.jsx)(d.Zp,{className:"text-center py-10 px-6 border-dashed bg-card",children:(0,s.jsxs)(d.Wu,{children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-card-foreground mb-2",children:"Nenhum resultado encontrado"}),(0,s.jsxs)("p",{className:"text-muted-foreground",children:['N\xe3o encontramos nenhum conte\xfado para "',e,'". Verifique o t\xedtulo ou fa\xe7a um pedido manual.']})]})})})]})]})}),(0,s.jsx)("footer",{className:"text-center p-4 text-muted-foreground text-sm",children:(0,s.jsxs)("p",{children:["Pedidos Cine \xa9 ",new Date().getFullYear()]})})]})}function O(){return(0,s.jsx)(T,{})}},4760:(e,a,t)=>{"use strict";t.d(a,{Q:()=>r});var s=t(4477);let r=(0,s.createServerReference)("007e87f2e2dbbb8d99d374e9797296581838690a1e",s.callServer,void 0,s.findSourceMapURL,"getM3UItems")},5476:(e,a,t)=>{"use strict";t.d(a,{z:()=>o,L:()=>m});var s=t(5155),r=t(2115),l=t(4760),i=t(4477);let n=(0,i.createServerReference)("00aef7fe477b36c101029c0e540702e6f4225a9e00",i.callServer,void 0,i.findSourceMapURL,"getAllM3UItems"),o=(0,r.createContext)({m3uItems:[],allM3uItems:[],isInitialLoading:!0}),d=null,c=null,u=!1,m=e=>{let{children:a}=e,[t,i]=(0,r.useState)(d||[]),[m,p]=(0,r.useState)(c||[]),[h,x]=(0,r.useState)(!u);return(0,r.useEffect)(()=>{(async()=>{if(!u)try{let[e,a]=await Promise.all([(0,l.Q)(),n()]);d=e,c=a,i(e),p(a)}catch(e){console.error("Failed to load M3U items for context:",e),d=[],c=[],i([]),p([])}finally{x(!1),u=!0}})()},[]),(0,s.jsx)(o.Provider,{value:{m3uItems:t,allM3uItems:m,isInitialLoading:h},children:a})}},8811:(e,a,t)=>{"use strict";t.d(a,{A:()=>n});var s=t(5155),r=t(9434);function l(e){let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",a),...t})}var i=t(6695);function n(){return(0,s.jsxs)(i.Zp,{className:"flex flex-col h-full overflow-hidden",children:[(0,s.jsx)(i.aR,{className:"p-0",children:(0,s.jsx)(l,{className:"aspect-[2/3] w-full"})}),(0,s.jsxs)(i.Wu,{className:"flex-grow p-4 space-y-2",children:[(0,s.jsx)(l,{className:"h-5 w-4/5"}),(0,s.jsxs)("div",{className:"space-y-1 pt-2",children:[(0,s.jsx)(l,{className:"h-3 w-full"}),(0,s.jsx)(l,{className:"h-3 w-full"}),(0,s.jsx)(l,{className:"h-3 w-2/3"})]})]}),(0,s.jsx)(i.wL,{className:"p-4 pt-0",children:(0,s.jsx)(l,{className:"h-5 w-1/2"})})]})}},9542:(e,a,t)=>{"use strict";t.d(a,{H:()=>n,n:()=>o});var s=t(5155),r=t(2115);class l{static async login(e,a){try{let t=await fetch("/api/xtream-auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:a})}),s=await t.json();if(!t.ok)throw Error(s.error||"Erro HTTP: ".concat(t.status));return s}catch(e){if(console.error("❌ Erro no login Xtream:",e),e instanceof TypeError&&e.message.includes("fetch"))throw Error("Erro de conectividade. Verifique sua conex\xe3o com a internet.");throw e}}static async validateCredentials(e,a){try{return await this.login(e,a),!0}catch(e){return!1}}static async logout(e){}}let i=(0,r.createContext)(void 0);function n(e){let{children:a}=e,[t,n]=(0,r.useState)(null),[o,d]=(0,r.useState)(!0),[c,u]=(0,r.useState)(!1),m=()=>{try{["@xtream_user","@xtream_auth_state","@unlocked_adult_categories","@adult_movies_unlocked","@stream_type","@last_channel"].forEach(e=>{localStorage.removeItem(e)})}catch(e){console.error("Erro ao limpar cache do usu\xe1rio:",e)}},p=(e,a)=>{try{let t=localStorage.getItem("@xtream_user");if(t){let s=JSON.parse(t),r=s.username!==e,l=s.password!==a;if(r||l)return m(),!0}return!1}catch(e){return!1}};(0,r.useEffect)(()=>{(async()=>{try{d(!0);let e=localStorage.getItem("@xtream_user");if(e){let a=JSON.parse(e);if(a.exp_date&&"0"!==a.exp_date){let e=new Date(1e3*parseInt(a.exp_date)),t=new Date;if(e<t){localStorage.removeItem("@xtream_user"),localStorage.removeItem("@xtream_auth_state"),m(),n(null),d(!1);return}}try{u(!0);let e=await l.login(a.username,a.password);n(e),localStorage.setItem("@xtream_user",JSON.stringify(e)),localStorage.setItem("@xtream_auth_state","true")}catch(e){localStorage.removeItem("@xtream_user"),localStorage.removeItem("@xtream_auth_state"),m(),n(null)}finally{u(!1)}}}catch(e){n(null)}finally{d(!1)}})()},[]);let h=async(e,a)=>{try{p(e,a);let t=await l.login(e,a);return n(t),localStorage.setItem("@xtream_user",JSON.stringify(t)),localStorage.setItem("@xtream_auth_state","true"),!0}catch(e){throw console.error("❌ Erro no login IPTV:",e),e}},x=async()=>{try{let e=null==t?void 0:t.username;e&&await l.logout(e),n(null),localStorage.removeItem("@xtream_user"),localStorage.removeItem("@xtream_auth_state"),m()}catch(e){n(null),localStorage.removeItem("@xtream_user"),localStorage.removeItem("@xtream_auth_state"),m()}};return(0,s.jsx)(i.Provider,{value:{userInfo:t,isLoading:o,isAuthenticated:!!t,isAutoLoggingIn:c,login:h,logout:x},children:a})}function o(){let e=(0,r.useContext)(i);if(void 0===e)throw Error("useXtream must be used within a XtreamProvider");return e}},9613:(e,a,t)=>{Promise.resolve().then(t.bind(t,4510))}},e=>{var a=a=>e(e.s=a);e.O(0,[135,184,248,446,696,327,405,441,684,358],()=>a(9613)),_N_E=e.O()}]);